<div ng-controller="ResetPasswordController" class="register">
    <div id="wrapper" class="loginWrapper">

        <a href ng-click="goToPage('/')"><img src="img/logo.png" width="240" height="102" alt="[matrix]" style="padding: 50px"/></a>
        <br/>

        <form id="loginForm" novalidate>
            <div ng-show="stage == 'initial'">
                Reset Password:<br/>
                
                <div style="text-align: center">
                    <br/>
                    <input id="email" size="32" type="text" ng-focus="true" ng-model="account.email" placeholder="Email address"/><br />
                    <input id="pwd1" size="32" type="password" ng-model="account.pwd1" placeholder="Type a password"/>
                    <br />
                    <input id="pwd2" size="32" type="password" ng-model="account.pwd2" placeholder="Confirm your password"/>
                    <br />

                    <button ng-show="!working" ng-click="reset_password()" ng-disabled="!account.email || !account.pwd1 || ! account.pwd2">Send Reset Email</button>
                    <div class="spinner" us-spinner ng-show="working"> </div>

                    <br/><br/>
                </div>

                <div class="feedback">{{ feedback }} {{ login_error_msg }}</div>
                
                <div id="serverConfig" ng-show="!wait_3pid_code">
                    <label for="homeserver">Home Server:</label> 
                    <input id="homeserver" size="32" type="text" ng-model="account.homeserver" placeholder="URL (e.g. http://matrix.org:8080)"/>
                    <div class="smallPrint">Your home server stores all your conversation and account data.</div>
                    <label for="identityServer">Identity Server:</label>
                    <input id="identityServer" size="32" type="text" ng-model="account.identityServer" placeholder="URL (e.g. http://matrix.org:8090)"/>
                    <div class="smallPrint">Matrix provides identity servers to track which emails etc. belong to which Matrix IDs.<br/>
                        Only http://matrix.org currently exists.</div>
                </div>
            </div>
            <div ng-show="stage == 'email'">
                <div style="text-align: center; ">
                    <span>An email has been sent to {{ account.email }}. Once you've followed the link it contains either continue registration there or click below</span><br />
                    <button ng-click="verifyToken()">I've verified my address: continue</button>
                </div>
            </div>
            <div ng-show="stage == 'done'">
                <div style="text-align: center; ">
                    <p>Your password has been reset.</p>
                    <p>You have been logged out of all devices and will no longer receive push notifications. To re-enable notifications, re-log in on each device.</p>
                    <p>Please <a href="#/login">Log In</a></p>
                </div>
            </div>
        </form>

    </div>
    </div>
</div>
